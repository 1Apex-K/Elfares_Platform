<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
    <link rel="icon" type="image/png" href="download7.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="poor.css">
    <title>منصة الفارس</title>
</head>
<body>
  <nav class="navbar">
  <div>
    <span class="navbar-brand">الفارس/</span> <br>
    <span class="navbar-brand1" id="user-name-display">ابراهيم عادل</span>
  </div>

  <div class="nav-buttons" id="nav-buttons">
    <a href="login.html" class="btn">تسجيل دخول</a>
    <a href="regestier.html" class="btn">انشاء حساب</a>
  </div>
  <div class="scroll-line"></div>
</nav>
<div class="hero-card" id="page">
  <div class="card-text">
    <h1>اللغه العربيه بقت اسهل</h1>
    <h2>أستاذ/ إبراهيم عادل - فارس اللغة العربية في مصر</h2>
    <h3>مهمتنا الأساسية رعايتك وحماية وقتك، نوفر لك جميع الدروس من مكانك 
    <br> انضم دلوقتي لعالم الفرسان⬇</h3>

    <div class="buttons">
      <a href="regestier.html" class="btn">سجل الآن</a>
      <a href="login.html" class="btn">قم بانشاء حساب</a>
    </div>
  </div>

  <div class="card-image">
    <img src="77.png" alt="صورة توضيحية">
  </div>
</div>
<section class="features-section" id="features">
        <div class="container">
            <h1>لماذا منصة الفارس؟</h1>
            <div class="features-grid">
                <div class="feature-item hidden">
                    <i class="fas fa-book"></i>
                    <h3>12 سنة خبرة</h3>
                    <p>نقدم لك خلاصة 12 عاماً من الخبرة في تدريس اللغة العربية بأحدث الطرق</p>
                </div>
                <div class="feature-item hidden">
                    <i class="fas fa-user-graduate"></i>
                    <h3>الطالب مهمتنا الأساسية</h3>
                    <p>تركيزنا ينصب على تقديم أفضل محتوى تعليمي ودعم لضمان تفوق كل طالب.</p>
                </div>
                <div class="feature-item hidden">
                    <i class="fas fa-home"></i>
                    <h3>وفر وقت المواصلات والسنتر</h3>
                    <p>كل ما تحتاجه لتعلم اللغة العربية في مكان واحد، من راحة منزلك.</p>
                </div>
                <div class="feature-item hidden">
                    <i class="fas fa-video"></i>
                    <h3>شاهد دروسك أكثر من مرة</h3>
                    <p>درس صعب؟ محتاج مراجعة؟ بضغطة زر واحدة يمكنك إعادة الدرس أكثر من مرة.</p>
                </div>
                <div class="feature-item hidden">
                    <i class="fas fa-file-alt"></i>
                    <h3>احضر امتحانات دورية</h3>
                    <p>يهمك تقييم مستواك الآن وغداً وفي نهاية كل أسبوع، احصل على اختباراتك الان</p>
                </div>
                <div class="feature-item hidden">
                    <i class="fas fa-comments"></i>
                    <h3>تواصل مع معلمك</h3>
                    <p>تريد التوجه مباشرة إلى معلمك؟ الآن بكل سهولة يمكنك التواصل معه</p>
                </div>
            </div>
        </div>
    </section>

<h1>اختار السنة الدراسية!</h1>

<div class="cards-row">
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">الصف</h5>
      <h5 class="card-title">الاول</h5>
      <h5 class="card-title">الثانوي</h5>
      <a href="#" class="card-link">جميع كورسات الصف الدراسي الاول ⬅</a>
    </div>
  </div>

  <div class="card">
    <div class="card-body">
      <h5 class="card-title">الصف</h5>
      <h5 class="card-title">الثاني</h5>
      <h5 class="card-title">الثانوي</h5>
      <a href="#" class="card-link">جميع كورسات الصف الدراسي الثاني ⬅</a>
    </div>
  </div>

  <div class="card">
    <div class="card-body">
      <h5 class="card-title">الصف</h5>
      <h5 class="card-title">الثالث</h5>
      <h5 class="card-title">الثانوي</h5>
      <a href="#" class="card-link">جميع كورسات الصف الدراسي الثالث ⬅</a>
    </div>
  </div>
</div>
<div class="big-card">
  <div class="left-side">
    <h1>الفارس/</h1>
    <h2>ابراهيم عادل</h2> 
    <br>
    <br>
    <p>@جميع الحقوق محفوظه</p>
    <p>
  @developed by 
  <a href="https://facebook.com/ahmed" target="_blank">Ahmed</a> , 
  <a href="https://facebook.com/kareem" target="_blank">Kareem</a>
   </p>

  </div>
<div class="right-side">
    <ul class="paragraph-group">
  <h6>الصفحات</h6>

  <li>
    <a href="#page">
      <i class="fa-solid fa-house"></i> الرئيسيه
    </a>
  </li>

  <li>
    <a href="https://wa.me/201122295969" target="_blank">
      <i class="fa-solid fa-circle-question"></i> المساعده
    </a>
  </li>

  <li>
    <a href="regestier.html">
      <i class="fa-solid fa-user-plus"></i> انشاء حساب جديد
    </a>
  </li>

  <li>
    <a href="login.html">
      <i class="fa-solid fa-right-to-bracket"></i> تسجيل دخول
    </a>
  </li>

</ul>


    <ul class="paragraph-group">
  <h6>السوشيال ميديا</h6>

  <li>
    <a href="https://www.facebook.com/share/1BTJT1VVur/" target="_blank">
      <i class="fa-brands fa-facebook"></i> فيسبوك
    </a>
  </li>

  <li>
    <a href="https://wa.me/201122295969" target="_blank">
      <i class="fa-brands fa-whatsapp"></i> واتساب
    </a>
  </li>

  <li>
    <a href="https://m.youtube.com/channel/UCT-Ao7Ubpdy4GQegUPNLTwQ?fbclid=IwVERDUAOVNkxleHRuA2FlbQIxMABzcnRjBmFwcF9pZAwzNTA2ODU1MzE3MjgAAR7xjosPgdOmmZsl4h5-QWgdwBP56yUMvbwgHz9Qf73smnWt5YSXqvSZHHqauQ_aem_joYwzdTOLe6qbJ-3RAk-Pw" target="_blank">
      <i class="fa-brands fa-youtube"></i> يوتيوب
    </a>
  </li>

  <li>
    <a href="https://t.me/username" target="_blank">
      <i class="fa-brands fa-telegram"></i> تليجرام
    </a>
  </li>
</ul>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
<script src="poor.js"></script>
<script type="module" src="firebase.js"></script>

<script type="module">
    // استيراد أدوات Firebase التي تم إعدادها في firebase.js
    import { firebaseAuth, firebaseDB } from "./firebase.js";

    // استيراد وظائف Firebase Auth و Firestore
    import { 
        onAuthStateChanged, 
        signOut 
    } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";
    
    import { 
        doc, 
        getDoc 
    } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";

    const userNameDisplay = document.getElementById('user-name-display');
    const navButtonsContainer = document.getElementById('nav-buttons');

    // دالة مساعدة لتسجيل الخروج
    const handleLogout = async () => {
        try {
            await signOut(firebaseAuth);
            window.location.reload(); // إعادة تحميل الصفحة لتحديث حالة شريط التنقل
        } catch (error) {
            console.error("خطأ في تسجيل الخروج:", error);
            alert("حدث خطأ أثناء تسجيل الخروج. الرجاء المحاولة مرة أخرى.");
        }
    };
    
    // ربط زر تسجيل الخروج بالدالة عند الضغط عليه (يتم إنشاؤه ديناميكيًا)
    document.addEventListener('click', (e) => {
        if (e.target && e.target.id === 'logout-btn') {
            e.preventDefault();
            handleLogout();
        }
    });

    // مراقبة حالة المصادقة (Auth State)
    onAuthStateChanged(firebaseAuth, async (user) => {
        if (user) {
            // المستخدم مسجل دخوله
            try {
                // جلب بيانات المستخدم من Firestore باستخدام الـ UID
                const docRef = doc(firebaseDB, "students", user.uid);
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    const userData = docSnap.data();
                    const firstName = userData.first;
                    
                    // تحديث اسم المستخدم في شريط التنقل
                    userNameDisplay.textContent = firstName; 
                    
                    // تحديث أزرار التنقل لعرض زر تسجيل الخروج
                    navButtonsContainer.innerHTML = `
                        <a href="#" id="logout-btn" class="btn">تسجيل خروج</a>
                    `;

                } else {
                    // في حال كان المستخدم مسجل دخوله ولكن بياناته غير موجودة في Firestore
                    userNameDisplay.textContent = "طالب مسجل";
                    navButtonsContainer.innerHTML = `
                        <a href="#" id="logout-btn" class="btn">تسجيل خروج</a>
                    `;
                }
            } catch (error) {
                console.error("خطأ في جلب بيانات Firestore:", error);
                userNameDisplay.textContent = "طالب مسجل";
                navButtonsContainer.innerHTML = `
                    <a href="#" id="logout-btn" class="btn">تسجيل خروج</a>
                `;
            }
        } else {
            // المستخدم غير مسجل دخوله
            userNameDisplay.textContent = "ابراهيم عادل"; // العودة إلى الاسم الافتراضي
            
            // العودة إلى أزرار تسجيل الدخول وإنشاء الحساب (تصحيح الروابط)
            navButtonsContainer.innerHTML = `
                <a href="login.html" class="btn">تسجيل دخول</a>
                <a href="regestier.html" class="btn">انشاء حساب</a>
            `;
        }
    });

</script>
</body>
</html>